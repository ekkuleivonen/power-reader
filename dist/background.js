(()=>{"use strict";var e={357:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.togglePlugins=void 0;const t=async()=>{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e},o=(e,s)=>{if(e.id)return chrome.tabs.sendMessage(e.id,s,(e=>{console.log("script response: ",e.msg)}))},n=(e,s,t)=>{if(e.id)return chrome.scripting.executeScript({target:{tabId:e.id},files:[t]}).then((t=>{e.id&&chrome.tabs.sendMessage(e.id,s,(e=>{console.log("script response: ",e.msg)}))}))};s.togglePlugins=e=>{(async e=>{const s=await t();!1===e.value?o(s,e):n(s,e,"dist/highlight.js")})({name:"highlights",value:e.highlights}),(async e=>{const s=await t();!1===e.value?o(s,e):n(s,e,"dist/reader-mode.js")})({name:"reader_mode",value:e.reader_mode}),(async e=>{const s=await t();!1===e.value?o(s,e):n(s,e,"dist/shortcuts.js")})({name:"shortcuts",value:e.shortcuts})}}},s={};function t(o){var n=s[o];if(void 0!==n)return n.exports;var i=s[o]={exports:{}};return e[o](i,i.exports,t),i.exports}(()=>{const e=t(357),s={highlights:!1,reader_mode:!1,shortcuts:!1};chrome.runtime.onInstalled.addListener((()=>{chrome.storage.sync.get(["plugin_options"],(e=>{e.plugin_options?(console.log("Existing options: ",e.plugin_options),Object.assign(s,e.plugin_options)):(console.log("Creating initial plugin options..."),chrome.storage.sync.set({plugin_options:s}))}))})),chrome.storage.onChanged.addListener(((t,o)=>{"sync"===o&&t.plugin_options?.newValue&&(Object.assign(s,t.plugin_options.newValue),(0,e.togglePlugins)(s))})),chrome.tabs.onUpdated.addListener((function(t,o,n){"complete"==o.status&&(0,e.togglePlugins)(s)}))})()})();