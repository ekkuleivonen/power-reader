(()=>{"use strict";var e={357:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.handleHotkey=o.togglePlugins=void 0;const s=async()=>{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e},t=(e,o)=>{if(e.id)return chrome.tabs.sendMessage(e.id,o,(e=>{console.log("script response: ",e.msg)}))},n=(e,o,s)=>{if(e.id)return chrome.scripting.executeScript({target:{tabId:e.id},files:[s]}).then((s=>{e.id&&chrome.tabs.sendMessage(e.id,o,(e=>{console.log("script response: ",e.msg)}))}))};o.togglePlugins=e=>{(async e=>{const o=await s();!1===e.value?t(o,e):n(o,e,"dist/highlight.js")})({name:"highlights",value:e.highlights}),(async e=>{const o=await s();!1===e.value?t(o,e):n(o,e,"dist/reader-mode.js")})({name:"reader_mode",value:e.reader_mode}),(async e=>{const o=await s();!1===e.value?t(o,e):n(o,e,"dist/shortcuts.js")})({name:"shortcuts",value:e.shortcuts})},o.handleHotkey=()=>{}}},o={};function s(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,s),i.exports}(()=>{const e=s(357),o={highlights:!1,reader_mode:!1,shortcuts:!1};chrome.runtime.onInstalled.addListener((()=>{chrome.storage.sync.get(["plugin_options"],(e=>{e.plugin_options?(console.log("Existing options: ",e.plugin_options),Object.assign(o,e.plugin_options)):(console.log("Creating initial plugin options..."),chrome.storage.sync.set({plugin_options:o}))}))})),chrome.storage.onChanged.addListener(((s,t)=>{"sync"===t&&s.plugin_options?.newValue&&(Object.assign(o,s.plugin_options.newValue),(0,e.togglePlugins)(o))})),chrome.tabs.onUpdated.addListener((function(s,t,n){"complete"==t.status&&(0,e.togglePlugins)(o)})),chrome.commands.onCommand.addListener((e=>{console.log(`Command: ${e}`),console.log("old options: ",o);const s=e;console.log("pluginoptions[plugin]: ",o[s]),!1===o[s]?o[s]=!0:o[s]=!1,console.log("updated options: ",o),chrome.storage.sync.set({plugin_options:o})}))})()})();